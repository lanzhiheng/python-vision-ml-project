# Python æœºå™¨å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰é¡¹ç›® 

åŸºäºPython 3.10çš„æœºå™¨å­¦ä¹ é¡¹ç›®ï¼Œä¸“æ³¨äºè®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ åº”ç”¨å¼€å‘ã€‚

## ğŸ†• Image Vector SDK

æœ¬é¡¹ç›®ç°åœ¨åŒ…å«äº†ä¸€ä¸ªå®Œæ•´çš„**å›¾ç‰‡å‘é‡åŒ–SDK**ï¼Œæ”¯æŒä½¿ç”¨CLIPæ¨¡å‹å°†å›¾ç‰‡è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼Œå¹¶å­˜å‚¨åˆ°Milvuså‘é‡æ•°æ®åº“ä¸­è¿›è¡Œç›¸ä¼¼æ€§æœç´¢ã€‚

### ä¸»è¦åŠŸèƒ½
- ğŸ–¼ï¸ **å›¾ç‰‡å‘é‡åŒ–**: ä½¿ç”¨CLIPæ¨¡å‹å°†å›¾ç‰‡è½¬æ¢ä¸ºé«˜ç»´å‘é‡
- ğŸ—„ï¸ **å‘é‡å­˜å‚¨**: é›†æˆMilvuså‘é‡æ•°æ®åº“è¿›è¡Œé«˜æ•ˆå­˜å‚¨
- ğŸ” **ç›¸ä¼¼æ€§æœç´¢**: åŸºäºå‘é‡ç›¸ä¼¼åº¦å¿«é€Ÿæœç´¢ç›¸ä¼¼å›¾ç‰‡
- âš™ï¸ **é…ç½®ç®¡ç†**: çµæ´»çš„ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ç®¡ç†
- ğŸ“Š **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤§è§„æ¨¡å›¾ç‰‡æ‰¹é‡å¤„ç†
- ğŸš€ **é«˜æ€§èƒ½**: æ”¯æŒå¹¶è¡Œå¤„ç†å’Œæ™ºèƒ½ç¼“å­˜

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®é›†æˆäº†å¤šä¸ªæ ¸å¿ƒæœºå™¨å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰åº“ï¼Œä¸ºå¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²ML/CVåº”ç”¨æä¾›å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### ä¼ ç»Ÿæœºå™¨å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰
- **Python 3.10** - æ ¸å¿ƒç¼–ç¨‹è¯­è¨€
- **PyTorch** - æ·±åº¦å­¦ä¹ æ¡†æ¶
- **OpenCV** - è®¡ç®—æœºè§†è§‰å¤„ç†åº“
- **PyQt5** - GUIç•Œé¢å¼€å‘æ¡†æ¶
- **scikit-learn** - æœºå™¨å­¦ä¹ ç®—æ³•åº“
- **NumPy** - æ•°å€¼è®¡ç®—
- **Pandas** - æ•°æ®å¤„ç†
- **Matplotlib** - æ•°æ®å¯è§†åŒ–

#### å›¾ç‰‡å‘é‡åŒ–SDKæ–°å¢æŠ€æœ¯
- **CLIP (OpenAI)** - å¤šæ¨¡æ€å›¾ç‰‡-æ–‡æœ¬ç†è§£æ¨¡å‹
- **Open-CLIP** - å¼€æºCLIPæ¨¡å‹å®ç°
- **Milvus** - é«˜æ€§èƒ½å‘é‡æ•°æ®åº“
- **PyMilvus** - Milvus Python SDK
- **python-dotenv** - ç¯å¢ƒå˜é‡ç®¡ç†

### é¡¹ç›®ç‰¹è‰²

- ğŸš€ å®Œæ•´çš„æœºå™¨å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰å¼€å‘ç¯å¢ƒ
- ğŸ¯ æ”¯æŒæ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒå’Œæ¨ç†
- ğŸ–¼ï¸ é›†æˆè®¡ç®—æœºè§†è§‰å›¾åƒå¤„ç†åŠŸèƒ½
- ğŸ–¥ï¸ æä¾›PyQt5 GUIç•Œé¢å¼€å‘æ”¯æŒ
- ğŸ“Š åŒ…å«æ•°æ®å¤„ç†å’Œå¯è§†åŒ–å·¥å…·
- ğŸ”§ æ¨¡å—åŒ–ä»£ç ç»“æ„ï¼Œæ˜“äºæ‰©å±•

## é¡¹ç›®ç»“æ„

```
ml-cv-project/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ models/            # æœºå™¨å­¦ä¹ æ¨¡å‹
â”‚   â”œâ”€â”€ computer_vision/   # è®¡ç®—æœºè§†è§‰æ¨¡å—
â”‚   â”œâ”€â”€ deep_learning/     # æ·±åº¦å­¦ä¹ æ¨¡å—
â”‚   â”œâ”€â”€ sdk/               # Image Vector SDKä¸»æ¨¡å—
â”‚   â”œâ”€â”€ vectorization/     # å›¾ç‰‡å‘é‡åŒ–æ¨¡å—
â”‚   â””â”€â”€ database/          # å‘é‡æ•°æ®åº“æ¨¡å—
â”œâ”€â”€ gui/                   # GUIç•Œé¢ä»£ç 
â”œâ”€â”€ data/                  # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/              # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ processed/        # å¤„ç†åæ•°æ®
â”‚   â””â”€â”€ models/           # è®­ç»ƒå¥½çš„æ¨¡å‹
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/                 # æµ‹è¯•ä»£ç 
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ model_config.yaml  # æ¨¡å‹é…ç½®  
â”‚   â””â”€â”€ sdk_config.yaml    # SDKé…ç½®
â”œâ”€â”€ notebooks/             # Jupyterç¬”è®°æœ¬
â”œâ”€â”€ examples/              # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ quick_start.py     # å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
â”‚   â”œâ”€â”€ basic_usage.py     # åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
â”‚   â””â”€â”€ advanced_usage.py  # é«˜çº§ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
```

## Image Vector SDK ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

#### 1. ç¯å¢ƒå‡†å¤‡

é¦–å…ˆéœ€è¦å¯åŠ¨Milvuså‘é‡æ•°æ®åº“ï¼š

```bash
# ä½¿ç”¨Dockerå¯åŠ¨Milvus
docker run -d --name milvus \
  -p 19530:19530 -p 9091:9091 \
  milvusdb/milvus:latest
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶è®¾ç½®ä½ çš„é…ç½®ï¼š

```bash
# Milvus æ•°æ®åº“é…ç½®
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION_NAME=image_vectors

# CLIP æ¨¡å‹é…ç½®
CLIP_MODEL_NAME=ViT-B/32
CLIP_DEVICE=auto
```

#### 3. å¿«é€Ÿå¼€å§‹ç¤ºä¾‹

```bash
# è¿è¡Œå¿«é€Ÿå¼€å§‹ç¤ºä¾‹
python examples/quick_start.py
```

### åŸºæœ¬ä½¿ç”¨

```python
from src.sdk import ImageVectorSDK

# 1. åˆå§‹åŒ–SDK
sdk = ImageVectorSDK(auto_connect=True)

# 2. å¤„ç†å•å¼ å›¾ç‰‡
vector_id = sdk.process_and_store_image("path/to/image.jpg")

# 3. æœç´¢ç›¸ä¼¼å›¾ç‰‡
similar_images = sdk.search_similar_images(
    query_image="path/to/query.jpg",
    top_k=10
)

# 4. æ‰¹é‡å¤„ç†å›¾ç‰‡
image_paths = ["img1.jpg", "img2.jpg", "img3.jpg"]
vector_ids = sdk.process_and_store_images(image_paths)
```

### é«˜çº§ç”¨æ³•

#### è‡ªå®šä¹‰é…ç½®

```python
from src.sdk import ImageVectorSDK, ConfigManager

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
sdk = ImageVectorSDK(
    config_file="custom_config.yaml",
    env_file=".env",
    auto_connect=True
)
```

#### æ‰¹é‡å¤„ç†å¸¦å…ƒæ•°æ®

```python
# æ‰¹é‡å¤„ç†å¸¦è‡ªå®šä¹‰å…ƒæ•°æ®
image_paths = ["cat1.jpg", "cat2.jpg", "dog1.jpg"]
metadata_list = [
    {"category": "cat", "breed": "persian"},
    {"category": "cat", "breed": "siamese"},
    {"category": "dog", "breed": "golden_retriever"}
]

vector_ids = sdk.process_and_store_images(
    image_paths, 
    metadata_list=metadata_list
)
```

#### é«˜çº§æœç´¢

```python
# ä½¿ç”¨è¿‡æ»¤å™¨æœç´¢
results = sdk.search_similar_images(
    query_image="query.jpg",
    top_k=10,
    threshold=0.8,  # åªè¿”å›ç›¸ä¼¼åº¦é«˜äº0.8çš„ç»“æœ
    filters={"category": "cat"}  # åªåœ¨çŒ«ç±»å›¾ç‰‡ä¸­æœç´¢
)
```

#### æ•°æ®åº“ç®¡ç†

```python
# è·å–ç»Ÿè®¡ä¿¡æ¯
stats = sdk.get_database_stats()
print(f"å·²å­˜å‚¨å‘é‡æ•°é‡: {stats['total_vectors']}")

# é‡å»ºç´¢å¼•
sdk.rebuild_index(index_type='HNSW', metric_type='COSINE')

# å¥åº·æ£€æŸ¥
health = sdk.health_check()
print(f"æ•´ä½“çŠ¶æ€: {health['overall']['status']}")
```

### API å‚è€ƒ

#### ImageVectorSDK ä¸»è¦æ–¹æ³•

| æ–¹æ³• | æè¿° | å‚æ•° |
|------|------|------|
| `process_and_store_image()` | å¤„ç†å¹¶å­˜å‚¨å•å¼ å›¾ç‰‡ | `image_path`, `metadata` |
| `process_and_store_images()` | æ‰¹é‡å¤„ç†å¹¶å­˜å‚¨å›¾ç‰‡ | `image_paths`, `metadata_list`, `batch_size` |
| `search_similar_images()` | æœç´¢ç›¸ä¼¼å›¾ç‰‡ | `query_image`, `top_k`, `threshold`, `filters` |
| `get_image_vector()` | è·å–å›¾ç‰‡å‘é‡ï¼ˆä¸å­˜å‚¨ï¼‰ | `image_path` |
| `delete_vectors()` | åˆ é™¤å‘é‡ | `ids`, `image_paths` |
| `health_check()` | å¥åº·æ£€æŸ¥ | æ—  |

### ç¤ºä¾‹æ–‡ä»¶

é¡¹ç›®æä¾›äº†å¤šä¸ªç¤ºä¾‹æ–‡ä»¶ï¼š

- `examples/quick_start.py` - æœ€ç®€å•çš„å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
- `examples/basic_usage.py` - åŸºæœ¬åŠŸèƒ½æ¼”ç¤º
- `examples/advanced_usage.py` - é«˜çº§ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–

### æµ‹è¯•

è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼š

```bash
python tests/test_sdk.py
```

## å®‰è£…å’Œè®¾ç½®

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.10+
- pipåŒ…ç®¡ç†å™¨

### 2. å®‰è£…ä¾èµ–

#### åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\\Scripts\\activate   # Windows
```

#### å®‰è£…ä¾èµ–åŒ…
```bash
pip install -r requirements.txt
```

### 3. æ ¸å¿ƒä¾èµ–è¯´æ˜

#### ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¾èµ–

| åº“åç§° | ç‰ˆæœ¬ | ç”¨é€” |
|--------|------|------|
| torch | >=2.0.0 | PyTorchæ·±åº¦å­¦ä¹ æ¡†æ¶ |
| torchvision | >=0.15.0 | PyTorchè®¡ç®—æœºè§†è§‰åº“ |
| opencv-contrib-python | >=4.8.0 | OpenCVè®¡ç®—æœºè§†è§‰å¤„ç† |
| pyqt5 | ==5.15.10 | GUIç•Œé¢å¼€å‘ |
| numpy | >=1.24.0 | æ•°å€¼è®¡ç®— |
| scikit-learn | >=1.3.0 | æœºå™¨å­¦ä¹ ç®—æ³• |
| pandas | >=2.0.0 | æ•°æ®å¤„ç† |
| matplotlib | >=3.7.0 | æ•°æ®å¯è§†åŒ– |

#### Image Vector SDK æ–°å¢ä¾èµ–

| åº“åç§° | ç‰ˆæœ¬ | ç”¨é€” |
|--------|------|------|
| open-clip-torch | >=2.20.0 | å¼€æºCLIPæ¨¡å‹å®ç° |
| pymilvus | >=2.3.0 | Milvuså‘é‡æ•°æ®åº“Python SDK |
| python-dotenv | >=1.0.0 | ç¯å¢ƒå˜é‡ç®¡ç† |
| pillow | >=10.0.0 | å›¾ç‰‡å¤„ç†åº“ |
| pyyaml | >=6.0 | YAMLé…ç½®æ–‡ä»¶è§£æ |

## å¿«é€Ÿå¼€å§‹

### 1. éªŒè¯å®‰è£…

```bash
python scripts/verify_installation.py
```

### 2. è¿è¡Œç¤ºä¾‹

#### ä¼ ç»Ÿæœºå™¨å­¦ä¹ ç¤ºä¾‹
```bash
# è®¡ç®—æœºè§†è§‰ç¤ºä¾‹
python examples/cv_example.py

# æ·±åº¦å­¦ä¹ ç¤ºä¾‹
python examples/dl_example.py

# GUIç•Œé¢ç¤ºä¾‹
python gui/main.py
```

#### Image Vector SDK ç¤ºä¾‹
```bash
# å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
python examples/quick_start.py

# åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
python examples/basic_usage.py

# é«˜çº§ç”¨æ³•ç¤ºä¾‹
python examples/advanced_usage.py

# è¿è¡Œæµ‹è¯•
python tests/test_sdk.py
```

### 3. è®­ç»ƒæ¨¡å‹

```bash
python src/models/train.py --config configs/model_config.yaml
```

## å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„

- `src/models/` - æ”¾ç½®æœºå™¨å­¦ä¹ æ¨¡å‹å®šä¹‰
- `src/computer_vision/` - è®¡ç®—æœºè§†è§‰ç›¸å…³åŠŸèƒ½
- `src/deep_learning/` - æ·±åº¦å­¦ä¹ æ¨¡å‹å’Œè®­ç»ƒä»£ç 
- `gui/` - PyQt5 GUIç•Œé¢ä»£ç 
- `utils/` - é€šç”¨å·¥å…·å‡½æ•°

### é…ç½®ç®¡ç†

é¡¹ç›®ä½¿ç”¨YAMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œä½äº`configs/`ç›®å½•ï¼š

- `model_config.yaml` - æ¨¡å‹é…ç½®
- `training_config.yaml` - è®­ç»ƒé…ç½®
- `gui_config.yaml` - GUIé…ç½®

### æ•°æ®ç®¡ç†

- `data/raw/` - å­˜æ”¾åŸå§‹æ•°æ®
- `data/processed/` - å­˜æ”¾é¢„å¤„ç†åçš„æ•°æ®
- `data/models/` - å­˜æ”¾è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶

## ç¤ºä¾‹åº”ç”¨

### 1. å›¾åƒåˆ†ç±»
```python
from src.computer_vision.image_classifier import ImageClassifier

classifier = ImageClassifier()
result = classifier.predict("path/to/image.jpg")
print(f"é¢„æµ‹ç»“æœ: {result}")
```

### 2. ç›®æ ‡æ£€æµ‹
```python
from src.computer_vision.object_detector import ObjectDetector

detector = ObjectDetector()
boxes = detector.detect("path/to/image.jpg")
```

### 3. GUIåº”ç”¨
```python
from gui.main import MLCVApp

app = MLCVApp()
app.run()
```

## å¼€å‘å·¥å…·

### ä»£ç æ ¼å¼åŒ–
```bash
black src/ gui/ utils/
```

### ä»£ç æ£€æŸ¥
```bash
flake8 src/ gui/ utils/
```

### è¿è¡Œæµ‹è¯•
```bash
pytest tests/
```

## è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… `LICENSE` æ–‡ä»¶ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: https://github.com/username/ml-cv-project
- é—®é¢˜åé¦ˆ: https://github.com/username/ml-cv-project/issues
- æ–‡æ¡£: https://ml-cv-project.readthedocs.io/

## æ›´æ–°æ—¥å¿—

### v0.1.0 (2024-01-01)
- åˆå§‹é¡¹ç›®ç»“æ„
- é›†æˆPyTorchã€OpenCVã€PyQt5ç­‰æ ¸å¿ƒåº“
- æä¾›åŸºç¡€çš„æœºå™¨å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰åŠŸèƒ½
- æ·»åŠ GUIç•Œé¢æ”¯æŒ

---

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œå¼€æºç¤¾åŒºçš„æ”¯æŒã€‚æœ¬é¡¹ç›®ä½¿ç”¨äº†ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºåº“ï¼š

- [PyTorch](https://pytorch.org/)
- [OpenCV](https://opencv.org/)
- [PyQt5](https://www.riverbankcomputing.com/software/pyqt/)
- [scikit-learn](https://scikit-learn.org/)
- [NumPy](https://numpy.org/)
- [Pandas](https://pandas.pydata.org/)
- [Matplotlib](https://matplotlib.org/)